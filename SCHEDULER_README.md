# è‡ªåŠ¨äº¤æ˜“è°ƒåº¦å™¨ä½¿ç”¨è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®æä¾›äº†ä¸‰ç§è‡ªåŠ¨äº¤æ˜“è°ƒåº¦å™¨ï¼Œå¯ä»¥æ¯5åˆ†é’Ÿè‡ªåŠ¨è¿è¡Œä¸€æ¬¡äº¤æ˜“ç¨‹åºï¼š

1. **Pythonè°ƒåº¦å™¨** (`auto_trader_scheduler.py`) - åŸºç¡€ç‰ˆæœ¬
2. **Shellè„šæœ¬** (`run_auto_trader.sh`) - ç®€å•ç‰ˆæœ¬
3. **é«˜çº§è°ƒåº¦å™¨** (`advanced_scheduler.py`) - åŠŸèƒ½å®Œæ•´ç‰ˆæœ¬

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¡€Pythonè°ƒåº¦å™¨

```bash
python auto_trader_scheduler.py
```

**ç‰¹ç‚¹ï¼š**
- æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡äº¤æ˜“
- æ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€å’Œç»“æœ
- æ”¯æŒCtrl+Cåœæ­¢

### 2. Shellè„šæœ¬è°ƒåº¦å™¨

```bash
./run_auto_trader.sh
```

**ç‰¹ç‚¹ï¼š**
- ç®€å•æ˜“ç”¨
- æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡äº¤æ˜“
- æ˜¾ç¤ºæ‰§è¡Œæ¬¡æ•°å’ŒçŠ¶æ€

### 3. é«˜çº§è°ƒåº¦å™¨ï¼ˆæ¨èï¼‰

```bash
python advanced_scheduler.py
```

**ç‰¹ç‚¹ï¼š**
- ğŸ“Š å®Œæ•´çš„æ—¥å¿—è®°å½•
- ğŸ“ˆ æ‰§è¡Œç»Ÿè®¡ä¿¡æ¯
- âš™ï¸ é…ç½®æ–‡ä»¶æ”¯æŒ
- ğŸ”„ è‡ªåŠ¨é‡è¯•æœºåˆ¶
- ğŸ“ çŠ¶æ€æŒä¹…åŒ–

## âš™ï¸ é…ç½®è¯´æ˜

### é«˜çº§è°ƒåº¦å™¨é…ç½® (`scheduler_config.json`)

```json
{
  "interval_minutes": 5,        // æ‰§è¡Œé—´éš”ï¼ˆåˆ†é’Ÿï¼‰
  "max_trades": 1,              // æœ€å¤§äº¤æ˜“æ¬¡æ•°
  "scan_minutes": 5,            // æ‰«ææ—¶é—´èŒƒå›´ï¼ˆåˆ†é’Ÿï¼‰
  "test_mode": true,            // æµ‹è¯•æ¨¡å¼ï¼ˆä¸æ‰§è¡Œå®é™…äº¤æ˜“ï¼‰
  "log_level": "INFO",          // æ—¥å¿—çº§åˆ«
  "max_retries": 3,             // æœ€å¤§é‡è¯•æ¬¡æ•°
  "retry_delay": 30             // é‡è¯•å»¶è¿Ÿï¼ˆç§’ï¼‰
}
```

### é…ç½®å‚æ•°è¯´æ˜

- **interval_minutes**: è°ƒåº¦å™¨æ‰§è¡Œé—´éš”ï¼Œé»˜è®¤5åˆ†é’Ÿ
- **max_trades**: æ¯æ¬¡æ‰§è¡Œçš„æœ€å¤§äº¤æ˜“æ¬¡æ•°ï¼Œé»˜è®¤1æ¬¡
- **scan_minutes**: æ‰«æå¤šå°‘åˆ†é’Ÿå†…ç»“æŸçš„å¸‚åœºï¼Œé»˜è®¤5åˆ†é’Ÿ
- **test_mode**: æ˜¯å¦å¯ç”¨æµ‹è¯•æ¨¡å¼ï¼Œé»˜è®¤trueï¼ˆä¸æ‰§è¡Œå®é™…äº¤æ˜“ï¼‰
- **log_level**: æ—¥å¿—çº§åˆ«ï¼ˆDEBUG, INFO, WARNING, ERRORï¼‰
- **max_retries**: æ‰§è¡Œå¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°
- **retry_delay**: é‡è¯•ä¹‹é—´çš„å»¶è¿Ÿæ—¶é—´

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### é«˜çº§è°ƒåº¦å™¨ç”Ÿæˆçš„æ–‡ä»¶

- **scheduler.log**: è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—
- **scheduler_stats.json**: æ‰§è¡Œç»Ÿè®¡ä¿¡æ¯
- **scheduler_config.json**: é…ç½®æ–‡ä»¶

### ç»Ÿè®¡ä¿¡æ¯åŒ…æ‹¬

- è¿è¡Œæ—¶é—´
- æ‰§è¡Œæ¬¡æ•°
- æˆåŠŸ/å¤±è´¥æ¬¡æ•°
- æœ€åæ‰§è¡Œæ—¶é—´
- æœ€åæˆåŠŸ/å¤±è´¥æ—¶é—´

## ğŸ› ï¸ è‡ªå®šä¹‰å‘½ä»¤

å¦‚æœéœ€è¦ä¿®æ”¹æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥ç¼–è¾‘ç›¸åº”çš„è„šæœ¬æ–‡ä»¶ï¼š

### åŸºç¡€è°ƒåº¦å™¨
ä¿®æ”¹ `auto_trader_scheduler.py` ä¸­çš„ `cmd` å˜é‡ï¼š

```python
cmd = [
    "uv", "run", "main.py", 
    "--minutes", "5", 
    "--auto-trade", 
    "--max-trades", "1"
]
```

### Shellè„šæœ¬
ä¿®æ”¹ `run_auto_trader.sh` ä¸­çš„å‘½ä»¤ï¼š

```bash
uv run main.py --minutes 5 --auto-trade --max-trades 1
```

### é«˜çº§è°ƒåº¦å™¨
ä¿®æ”¹ `scheduler_config.json` é…ç½®æ–‡ä»¶ï¼Œæˆ–ç¼–è¾‘ `advanced_scheduler.py` ä¸­çš„å‘½ä»¤æ„å»ºé€»è¾‘ã€‚

## ğŸ”§ ç³»ç»ŸæœåŠ¡ï¼ˆå¯é€‰ï¼‰

### ä½¿ç”¨systemdåˆ›å»ºç³»ç»ŸæœåŠ¡

1. åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š

```bash
sudo nano /etc/systemd/system/polymarket-trader.service
```

2. æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```ini
[Unit]
Description=Polymarket Auto Trader
After=network.target

[Service]
Type=simple
User=your_username
WorkingDirectory=/path/to/polymarket
ExecStart=/usr/bin/python3 /path/to/polymarket/advanced_scheduler.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

3. å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl enable polymarket-trader.service
sudo systemctl start polymarket-trader.service
```

4. æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š

```bash
sudo systemctl status polymarket-trader.service
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•æ¨¡å¼**: é»˜è®¤å¯ç”¨æµ‹è¯•æ¨¡å¼ï¼Œä¸ä¼šæ‰§è¡Œå®é™…äº¤æ˜“
2. **ç½‘ç»œè¿æ¥**: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š
3. **èµ„æºç›‘æ§**: å®šæœŸæ£€æŸ¥æ—¥å¿—å’Œç»Ÿè®¡ä¿¡æ¯
4. **å®‰å…¨**: ç¡®ä¿ç§é’¥å’Œé…ç½®æ–‡ä»¶çš„å®‰å…¨
5. **å¤‡ä»½**: å®šæœŸå¤‡ä»½é…ç½®å’Œæ—¥å¿—æ–‡ä»¶

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å‘½ä»¤æ‰§è¡Œå¤±è´¥**
   - æ£€æŸ¥uvæ˜¯å¦æ­£ç¡®å®‰è£…
   - æ£€æŸ¥main.pyæ˜¯å¦å­˜åœ¨
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

2. **æƒé™é—®é¢˜**
   - ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™ï¼š`chmod +x run_auto_trader.sh`
   - æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®

3. **é…ç½®é—®é¢˜**
   - æ£€æŸ¥scheduler_config.jsonæ ¼å¼æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦è®¾ç½®

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f scheduler.log

# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
grep ERROR scheduler.log

# æŸ¥çœ‹æ‰§è¡Œç»Ÿè®¡
cat scheduler_stats.json
```

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯
2. é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´
